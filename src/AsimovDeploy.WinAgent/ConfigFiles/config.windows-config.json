{
    "NodeFrontUrl": "http://test04.intranet.tradera.com:3333",
    "AgentGroup": "Windows-Config",

    "PackageSources":  {
        "DSC_Intranet_WindowsUpdate": { "Type": "FileSystem", "Uri": "file://tradera-build1.intranet.tradera.com/Drops/windowsConfig/DSC_Intranet_WindowsUpdate" },
        "DSC_Test": { "Type": "FileSystem", "Uri": "file://tradera-build1.intranet.tradera.com/Drops/windowsConfig/dsc_intranet_test" }
    },

    "HeartbeatIntervalSeconds": 60,

    "Units": [
        {
            "Name":			"Windows Update",
            "Type":			"PowerShell",
            "PackageInfo":	{ "Source": "DSC_Intranet_WindowsUpdate" },
            "Script":
            "
               ./Get-WUServiceManager.ps1
            ",
                "Actions": {
				"Available Updates": {
					"Type": "Command",
					"Command": "powershell ./Get-WUList.ps1"
				    },
				"Install Updates": {
					"Type": "Command",
					"Command": "powershell ./Get-WUInstall.ps1"
				    },
				"Updates History": {
					"Type": "Command",
					"Command": "powershell ./Get-WUHistory.ps1"
				    },
				"Install Powershell Modules": {
					"Type": "Command",
					"Command": "powershell ./Modules.ps1"
				    }
                }
        },
        {
            "Name":			"Test.Dsc",
            "OnlyOnAgents":	[ 
                "rob-dsc-test11",
                "rob-dsc-test12",
                "rob-dsc-test14"
            ],
            "Type":			"PowerShell",
            "PackageInfo":	{ "Source": "DSC_Test" },
			"DeployParameters": {
			"Password": { "Type": "Text"}
			},
            "Script":
            "
               ./DSC_Test.ps1 -password $password
            ",
                "Actions": {
				"Run DSC": {
					"Type": "Command",
					"Command": "powershell ./Run_DSC.ps1"
				},                    
				"Pester": {
					"Type": "Command",
					"Command": "powershell ./pester.ps1"
				},
				"Disable LCM Client": {
					"Type": "Command",
					"Command": "powershell ./LCM_Disable.ps1"
				},
				"Configure and Enable LCM Client": {
					"Type": "Command",
					"Command": "powershell ./LCM_Config_Enable.ps1"
				},
				"Install Powershell Modules": {
					"Type": "Command",
					"Command": "powershell ./Modules.ps1"
				}
			}
        },
        {
            "Name":			"Test.Telegraf",
            "OnlyOnAgents":	[ 
                "rob-dsc-test11",
                "rob-dsc-test12",
                "rob-dsc-test14"
            ],
            "Type":			"WindowsService",
            "PackageInfo": { "Source": "DSC_Test", "InternalPath":  "_PublishedApplications\\telegraf"  },
            "ServiceName":	"telegraf",
            "Installable": {
                "TargetPath": "D:\\Applications\\telegraf",
                "Install": ".\\telegraf.exe --service install --config D:\\Applications\\telegraf\\telegraf.conf",

                "Uninstall": ".\\telegraf.exe --service uninstall"
            }
        }
     ]
}



